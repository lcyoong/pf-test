import{r as h,c as $,p as F,d as L,o as G,a as oe,u as r,i as z,I as C,z as I,F as T,b as V,g as P,h as E,f as e,m as D,M as j,J as A,x as R,l as O,K as U,L as S,j as x,s as B,e as N,k as se,t as k,q}from"./app-674cf139.js";import{_ as H,d as ne,a as le}from"./Modal-dbcf020d.js";import{_ as re,M as ie}from"./MainNav-0c43054b.js";import{t as J,P as M,o as ae,V as de,w as ue,a as K}from"./use-outside-click-8af9ac09.js";import{M as ce,f as pe,a as me}from"./dialog-16ef0a0e.js";import{b as fe}from"./use-resolve-button-type-45894e64.js";/* empty css            */function xe(n){var d;let i=(d=n==null?void 0:n.form)!=null?d:n.closest("form");if(i){for(let s of i.elements)if(s.tagName==="INPUT"&&s.type==="submit"||s.tagName==="BUTTON"&&s.type==="submit"||s.nodeName==="INPUT"&&s.type==="image"){s.click();return}}}function ge(n,d,i){let s=h(i==null?void 0:i.value),u=$(()=>n.value!==void 0);return[$(()=>u.value?n.value:s.value),function(o){return u.value||(s.value=o),d==null?void 0:d(o)}]}let Y=Symbol("LabelContext");function Q(){let n=z(Y,null);if(n===null){let d=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(d,Q),d}return n}function he({slot:n={},name:d="Label",props:i={}}={}){let s=h([]);function u(o){return s.value.push(o),()=>{let l=s.value.indexOf(o);l!==-1&&s.value.splice(l,1)}}return F(Y,{register:u,slot:n,name:d,props:i}),$(()=>s.value.length>0?s.value.join(" "):void 0)}let _t=L({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-label-${J()}`}},setup(n,{slots:d,attrs:i}){let s=Q();return G(()=>oe(s.register(n.id))),()=>{let{name:u="Label",slot:o={},props:l={}}=s,{id:m,passive:g,...c}=n,t={...Object.entries(l).reduce((b,[y,_])=>Object.assign(b,{[y]:r(_)}),{}),id:m};return g&&(delete t.onClick,delete c.onClick),M({ourProps:t,theirProps:c,slot:o,attrs:i,slots:d,name:u})}}}),W=Symbol("GroupContext");L({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(n,{slots:d,attrs:i}){let s=h(null),u=he({name:"SwitchLabel",props:{onClick(){!s.value||(s.value.click(),s.value.focus({preventScroll:!0}))}}}),o=ce({name:"SwitchDescription"});return F(W,{switchRef:s,labelledby:u,describedby:o}),()=>M({theirProps:n,ourProps:{},slot:{},slots:d,attrs:i,name:"SwitchGroup"})}});let be=L({name:"Switch",emits:{"update:modelValue":n=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${J()}`}},inheritAttrs:!1,setup(n,{emit:d,attrs:i,slots:s,expose:u}){let o=z(W,null),[l,m]=ge($(()=>n.modelValue),a=>d("update:modelValue",a),$(()=>n.defaultChecked));function g(){m(!l.value)}let c=h(null),t=o===null?c:o.switchRef,b=fe($(()=>({as:n.as,type:i.type})),t);u({el:t,$el:t});function y(a){a.preventDefault(),g()}function _(a){a.key===K.Space?(a.preventDefault(),g()):a.key===K.Enter&&xe(a.currentTarget)}function w(a){a.preventDefault()}let v=$(()=>{var a,f;return(f=(a=ae(t))==null?void 0:a.closest)==null?void 0:f.call(a,"form")});return G(()=>{C([v],()=>{if(!v.value||n.defaultChecked===void 0)return;function a(){m(n.defaultChecked)}return v.value.addEventListener("reset",a),()=>{var f;(f=v.value)==null||f.removeEventListener("reset",a)}},{immediate:!0})}),()=>{let{id:a,name:f,value:p,...Z}=n,ee={checked:l.value},te={id:a,ref:t,role:"switch",type:b.value,tabIndex:0,"aria-checked":l.value,"aria-labelledby":o==null?void 0:o.labelledby.value,"aria-describedby":o==null?void 0:o.describedby.value,onClick:y,onKeyup:_,onKeypress:w};return I(T,[f!=null&&l.value!=null?I(pe,de({features:me.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:l.value,name:f,value:p})):null,M({ourProps:te,theirProps:{...i,...ue(Z,["modelValue","defaultChecked"])},slot:ee,attrs:i,slots:s,name:"Switch"})])}}});const ye=e("span",{class:"sr-only"},"Use setting",-1),X={name:"Toggle",props:{switch:Boolean},setup(n,{emit:d}){let s=h(n.switch);return C(()=>s.value,u=>{d(u?"toggleOn":"toggleOff")}),(u,o)=>(V(),P(r(be),{modelValue:r(s),"onUpdate:modelValue":o[0]||(o[0]=l=>j(s)?s.value=l:s=l),class:D([r(s)?"bg-indigo-600":"bg-gray-200","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"])},{default:E(()=>[ye,e("span",{"aria-hidden":"true",class:D([r(s)?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)]),_:1},8,["modelValue","class"]))}},ve=e("p",{class:"text-xl font-bold"},"Edit User",-1),_e={class:"py-5"},we=["onSubmit"],ke={class:"flex flex-col space-y-1"},$e=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Name",-1),Ue={class:"flex flex-col space-y-1"},Se=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Phone",-1),Ve={class:"flex flex-col space-y-1"},Ce=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Email",-1),Ee={class:"flex flex-col space-y-1"},Oe=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Show Notifications",-1),je=e("button",{type:"submit",class:"flex-none justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},"Update",-1),Ne={name:"UserEdit",props:{errors:Object,user:Object},setup(n,{expose:d,emit:i}){const s=n,u=h(),o=A(s.user);let l=h(s.errors);const m=()=>{u.value.show()};function g(){B.Inertia.post(route("user.update",{user:s.user.id}),o,{errorBag:"editUser",preserveState:!0,preserveScroll:!0,onSuccess:c=>{l.value=null,i("userUpdated"),u.value.close()}})}return C(()=>s.errors,c=>{l.value=c}),C(()=>s.user,c=>{c&&(o.id=c.id,o.name=c.name,o.phone=c.phone,o.email=c.email,o.show_notification=c.show_notification)}),d({show:m}),(c,t)=>{const b=R("ValidationError");return V(),P(H,{ref_key:"modalRef",ref:u,onClose:t[5]||(t[5]=y=>j(l)?l.value=null:l=null)},{default:E(()=>{var y,_,w,v,a,f;return[ve,e("div",_e,[e("form",{class:"py-2 space-y-2",onSubmit:O(g,["prevent"])},[e("div",ke,[$e,U(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=p=>r(o).name=p),class:"border block w-full min-w-0 flex-1 rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 sm:text-sm"},null,512),[[S,r(o).name]]),x(b,{error:(_=(y=r(l))==null?void 0:y.editUser)==null?void 0:_.name},null,8,["error"])]),e("div",Ue,[Se,U(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=p=>r(o).phone=p),class:"border block w-full min-w-0 flex-1 rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 sm:text-sm"},null,512),[[S,r(o).phone]]),x(b,{error:(v=(w=r(l))==null?void 0:w.editUser)==null?void 0:v.phone},null,8,["error"])]),e("div",Ve,[Ce,U(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=p=>r(o).email=p),class:"border block w-full min-w-0 flex-1 rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 sm:text-sm"},null,512),[[S,r(o).email]]),x(b,{error:(f=(a=r(l))==null?void 0:a.editUser)==null?void 0:f.email},null,8,["error"])]),e("div",Ee,[Oe,x(X,{switch:!!r(o).show_notification,onToggleOn:t[3]||(t[3]=p=>r(o).show_notification=1),onToggleOff:t[4]||(t[4]=p=>r(o).show_notification=0)},null,8,["switch"])]),je],40,we)])]}),_:1},512)}}},Te=e("p",{class:"text-xl font-bold"},"New User",-1),Le={class:"py-5"},Pe=["onSubmit"],Re={class:"flex flex-col space-y-1"},Be=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Name",-1),Me={class:"flex flex-col space-y-1"},Ie=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Phone",-1),De={class:"flex flex-col space-y-1"},Ke=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Email",-1),Fe={class:"flex flex-col space-y-1"},Ge=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Show Notifications",-1),ze=e("button",{type:"submit",class:"flex-none justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},"Create",-1),Ae={name:"UserNew",props:{errors:Object},setup(n,{expose:d,emit:i}){const s=n,u=h();let o=h(s.errors);const l=A({name:"",phone:"",email:"",show_notification:1}),m=()=>{u.value.show()};function g(){B.Inertia.post(route("user.store"),l,{errorBag:"newUser",preserveState:!0,preserveScroll:!0,onSuccess:c=>{l.reset(),o.value=null,i("userUpdated"),u.value.close()}})}return C(()=>s.errors,c=>{o.value=c}),d({show:m}),(c,t)=>{const b=R("ValidationError");return V(),P(H,{ref_key:"modalRef",ref:u,onClose:t[5]||(t[5]=y=>j(o)?o.value=null:o=null)},{default:E(()=>{var y,_,w,v,a,f;return[Te,e("div",Le,[e("form",{class:"py-2 space-y-2",onSubmit:O(g,["prevent"])},[e("div",Re,[Be,U(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=p=>r(l).name=p),class:"border block w-full min-w-0 flex-1 rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 sm:text-sm"},null,512),[[S,r(l).name]]),x(b,{error:(_=(y=r(o))==null?void 0:y.newUser)==null?void 0:_.name},null,8,["error"])]),e("div",Me,[Ie,U(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=p=>r(l).phone=p),class:"border block w-full min-w-0 flex-1 rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 sm:text-sm"},null,512),[[S,r(l).phone]]),x(b,{error:(v=(w=r(o))==null?void 0:w.newUser)==null?void 0:v.phone},null,8,["error"])]),e("div",De,[Ke,U(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=p=>r(l).email=p),class:"border block w-full min-w-0 flex-1 rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 sm:text-sm"},null,512),[[S,r(l).email]]),x(b,{error:(f=(a=r(o))==null?void 0:a.newUser)==null?void 0:f.email},null,8,["error"])]),e("div",Fe,[Ge,x(X,{switch:!!r(l).show_notification,onToggleOn:t[3]||(t[3]=p=>r(l).show_notification=1),onToggleOff:t[4]||(t[4]=p=>r(l).show_notification=0)},null,8,["switch"])]),ze],40,Pe)])]}),_:1},512)}}},qe={class:""},He={class:"flex items-center justify-between"},Je=e("h1",{class:"text-xl font-bold py-3"},"Users",-1),Ye={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Qe={class:"sm:flex-auto"},We={class:"mt-8 flex flex-col"},Xe={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},Ze={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},et={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},tt={class:"min-w-full divide-y divide-gray-300"},ot=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"},"Name"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Email"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Phone"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Show notification"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Unread"),e("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"Edit")])])],-1),st={class:"divide-y divide-gray-200 bg-white"},nt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},lt={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},rt={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},it={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},at={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},dt={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 space-x-3"},ut=["onClick"],ct=q("Edit"),pt={class:"sr-only"},mt=q("Impersonate"),wt={name:"Index",props:{users:Object,search:String,errors:Object},setup(n){let i=h(n.search),s=h(),u=h(),o=h();C(i,ne(function(m){B.Inertia.get("/admin/users",{search:m},{preserveState:!0,replace:!0})},300));function l(m){s.value=m,u.value.show()}return(m,g)=>{const c=R("Link");return V(),N(T,null,[x(ie,{class:"bg-gray-300 px-10 py-6"}),x(re,null,{default:E(()=>[e("div",qe,[e("div",He,[Je,e("div",Ye,[e("button",{type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto",onClick:g[0]||(g[0]=O(t=>r(o).show(),["prevent"]))}," Add user ")])]),e("div",Qe,[U(e("input",{type:"email",name:"email","onUpdate:modelValue":g[1]||(g[1]=t=>j(i)?i.value=t:i=t),id:"email",class:"block w-full rounded-md border-gray-300 border focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm py-3 px-2",placeholder:"Filter by name, email or phone"},null,512),[[S,r(i)]])]),e("div",We,[e("div",Xe,[e("div",Ze,[e("div",et,[e("table",tt,[ot,e("tbody",st,[(V(!0),N(T,null,se(n.users.data,t=>(V(),N("tr",{key:t.email},[e("td",nt,k(t.name),1),e("td",lt,k(t.email),1),e("td",rt,k(t.phone),1),e("td",it,k(t.show_notification),1),e("td",at,k(t.active_notification_count)+" of "+k(t.all_notification_count),1),e("td",dt,[e("a",{href:"#",class:"text-indigo-600 hover:text-indigo-900",onClick:O(b=>l(t),["prevent"])},[ct,e("span",pt,", "+k(t.name),1)],8,ut),x(c,{href:m.route("impersonate",{user:t.id}),class:"text-indigo-600 hover:text-indigo-900"},{default:E(()=>[mt]),_:2},1032,["href"])])]))),128))])])])])])])]),x(le,{pagination:n.users},null,8,["pagination"])]),_:1}),x(Ne,{ref_key:"editUserModalRef",ref:u,user:r(s),errors:n.errors},null,8,["user","errors"]),x(Ae,{ref_key:"newUserModalRef",ref:o,errors:n.errors},null,8,["errors"])],64)}}};export{wt as default};
