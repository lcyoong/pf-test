import{r as h,c as k,p as D,d as N,o as K,a as oe,u as d,i as F,I as E,z as B,F as j,b as S,g as T,h as V,f as e,m as M,M as G,J as z,x as L,l as C,K as $,L as U,j as x,s as P,e as O,k as se,t as w,q as A}from"./app-f244ae7d.js";import{_ as q,d as ne,a as re}from"./Modal-3f123e20.js";import{_ as le,M as ie}from"./MainNav-68fa6238.js";import{t as H,P as R,o as ae,V as de,w as ce,a as I}from"./use-outside-click-7e8fc182.js";import{M as ue,f as pe,a as me}from"./dialog-d070ef5f.js";import{b as fe}from"./use-resolve-button-type-eb4bc1a2.js";/* empty css            */function xe(o){var c;let a=(c=o==null?void 0:o.form)!=null?c:o.closest("form");if(a){for(let t of a.elements)if(t.tagName==="INPUT"&&t.type==="submit"||t.tagName==="BUTTON"&&t.type==="submit"||t.nodeName==="INPUT"&&t.type==="image"){t.click();return}}}function he(o,c,a){let t=h(a==null?void 0:a.value),n=k(()=>o.value!==void 0);return[k(()=>n.value?o.value:t.value),function(s){return n.value||(t.value=s),c==null?void 0:c(s)}]}let J=Symbol("LabelContext");function Y(){let o=F(J,null);if(o===null){let c=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(c,Y),c}return o}function ge({slot:o={},name:c="Label",props:a={}}={}){let t=h([]);function n(s){return t.value.push(s),()=>{let p=t.value.indexOf(s);p!==-1&&t.value.splice(p,1)}}return D(J,{register:n,slot:o,name:c,props:a}),k(()=>t.value.length>0?t.value.join(" "):void 0)}let _t=N({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-label-${H()}`}},setup(o,{slots:c,attrs:a}){let t=Y();return K(()=>oe(t.register(o.id))),()=>{let{name:n="Label",slot:s={},props:p={}}=t,{id:f,passive:i,...u}=o,r={...Object.entries(p).reduce((g,[y,v])=>Object.assign(g,{[y]:d(v)}),{}),id:f};return i&&(delete r.onClick,delete u.onClick),R({ourProps:r,theirProps:u,slot:s,attrs:a,slots:c,name:n})}}}),Q=Symbol("GroupContext");N({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(o,{slots:c,attrs:a}){let t=h(null),n=ge({name:"SwitchLabel",props:{onClick(){!t.value||(t.value.click(),t.value.focus({preventScroll:!0}))}}}),s=ue({name:"SwitchDescription"});return D(Q,{switchRef:t,labelledby:n,describedby:s}),()=>R({theirProps:o,ourProps:{},slot:{},slots:c,attrs:a,name:"SwitchGroup"})}});let be=N({name:"Switch",emits:{"update:modelValue":o=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${H()}`}},inheritAttrs:!1,setup(o,{emit:c,attrs:a,slots:t,expose:n}){let s=F(Q,null),[p,f]=he(k(()=>o.modelValue),l=>c("update:modelValue",l),k(()=>o.defaultChecked));function i(){f(!p.value)}let u=h(null),r=s===null?u:s.switchRef,g=fe(k(()=>({as:o.as,type:a.type})),r);n({el:r,$el:r});function y(l){l.preventDefault(),i()}function v(l){l.key===I.Space?(l.preventDefault(),i()):l.key===I.Enter&&xe(l.currentTarget)}function _(l){l.preventDefault()}let b=k(()=>{var l,m;return(m=(l=ae(r))==null?void 0:l.closest)==null?void 0:m.call(l,"form")});return K(()=>{E([b],()=>{if(!b.value||o.defaultChecked===void 0)return;function l(){f(o.defaultChecked)}return b.value.addEventListener("reset",l),()=>{var m;(m=b.value)==null||m.removeEventListener("reset",l)}},{immediate:!0})}),()=>{let{id:l,name:m,value:X,...Z}=o,ee={checked:p.value},te={id:l,ref:r,role:"switch",type:g.value,tabIndex:0,"aria-checked":p.value,"aria-labelledby":s==null?void 0:s.labelledby.value,"aria-describedby":s==null?void 0:s.describedby.value,onClick:y,onKeyup:v,onKeypress:_};return B(j,[m!=null&&p.value!=null?B(pe,de({features:me.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:p.value,name:m,value:X})):null,R({ourProps:te,theirProps:{...a,...ce(Z,["modelValue","defaultChecked"])},slot:ee,attrs:a,slots:t,name:"Switch"})])}}});const ye=e("span",{class:"sr-only"},"Use setting",-1),W={name:"Toggle",props:{switch:Boolean},setup(o,{emit:c}){let t=h(o.switch);return E(()=>t.value,n=>{c(n?"toggleOn":"toggleOff")}),(n,s)=>(S(),T(d(be),{modelValue:d(t),"onUpdate:modelValue":s[0]||(s[0]=p=>G(t)?t.value=p:t=p),class:M([d(t)?"bg-indigo-600":"bg-gray-200","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"])},{default:V(()=>[ye,e("span",{"aria-hidden":"true",class:M([d(t)?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)]),_:1},8,["modelValue","class"]))}},ve=e("p",{class:"text-xl font-bold"},"Edit User",-1),_e={class:"py-5"},we=["onSubmit"],ke={class:"flex flex-col space-y-1"},$e=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Name",-1),Ue={class:"flex flex-col space-y-1"},Se=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Phone",-1),Ve={class:"flex flex-col space-y-1"},Ce=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Email",-1),Ee={class:"flex flex-col space-y-1"},Oe=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Show Notifications",-1),je=e("button",{type:"submit",class:"flex-none justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},"Update",-1),Ne={name:"UserEdit",props:{errors:Object,user:Object},setup(o,{expose:c,emit:a}){const t=o,n=h(),s=z(t.user),p=()=>{n.value.show()};function f(){P.Inertia.post(route("user.update",{user:t.user.id}),s,{errorBag:"editUser",preserveState:!0,preserveScroll:!0,onSuccess:i=>{a("userUpdated"),n.value.close()}})}return E(()=>t.user,i=>{i&&(s.id=i.id,s.name=i.name,s.phone=i.phone,s.email=i.email,s.show_notification=i.show_notification)}),c({show:p}),(i,u)=>{const r=L("ValidationError");return S(),T(q,{ref_key:"modalRef",ref:n},{default:V(()=>{var g,y,v,_,b,l;return[ve,e("div",_e,[e("form",{class:"py-2 space-y-2",onSubmit:C(f,["prevent"])},[e("div",ke,[$e,$(e("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=m=>d(s).name=m),class:"border block w-full min-w-0 flex-1 rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 sm:text-sm"},null,512),[[U,d(s).name]]),x(r,{error:(y=(g=o.errors)==null?void 0:g.editUser)==null?void 0:y.name},null,8,["error"])]),e("div",Ue,[Se,$(e("input",{type:"text","onUpdate:modelValue":u[1]||(u[1]=m=>d(s).phone=m),class:"border block w-full min-w-0 flex-1 rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 sm:text-sm"},null,512),[[U,d(s).phone]]),x(r,{error:(_=(v=o.errors)==null?void 0:v.editUser)==null?void 0:_.phone},null,8,["error"])]),e("div",Ve,[Ce,$(e("input",{type:"text","onUpdate:modelValue":u[2]||(u[2]=m=>d(s).email=m),class:"border block w-full min-w-0 flex-1 rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 sm:text-sm"},null,512),[[U,d(s).email]]),x(r,{error:(l=(b=o.errors)==null?void 0:b.editUser)==null?void 0:l.email},null,8,["error"])]),e("div",Ee,[Oe,x(W,{switch:!!d(s).show_notification,onToggleOn:u[3]||(u[3]=m=>d(s).show_notification=1),onToggleOff:u[4]||(u[4]=m=>d(s).show_notification=0)},null,8,["switch"])]),je],40,we)])]}),_:1},512)}}},Te=e("p",{class:"text-xl font-bold"},"New User",-1),Le={class:"py-5"},Pe=["onSubmit"],Re={class:"flex flex-col space-y-1"},Be=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Name",-1),Me={class:"flex flex-col space-y-1"},Ie=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Phone",-1),De={class:"flex flex-col space-y-1"},Ke=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Email",-1),Fe={class:"flex flex-col space-y-1"},Ge=e("label",{class:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},"Show Notifications",-1),ze=e("button",{type:"submit",class:"flex-none justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},"Create",-1),Ae={name:"UserNew",props:{errors:Object},setup(o,{expose:c,emit:a}){const t=h(),n=z({name:"",phone:"",email:"",show_notification:1}),s=()=>{t.value.show()};function p(){P.Inertia.post(route("user.store"),n,{errorBag:"newUser",preserveState:!0,preserveScroll:!0,onSuccess:f=>{a("userUpdated"),t.value.close()}})}return c({show:s}),(f,i)=>{const u=L("ValidationError");return S(),T(q,{ref_key:"modalRef",ref:t},{default:V(()=>{var r,g,y,v,_,b;return[Te,e("div",Le,[e("form",{class:"py-2 space-y-2",onSubmit:C(p,["prevent"])},[e("div",Re,[Be,$(e("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=l=>d(n).name=l),class:"border block w-full min-w-0 flex-1 rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 sm:text-sm"},null,512),[[U,d(n).name]]),x(u,{error:(g=(r=o.errors)==null?void 0:r.newUser)==null?void 0:g.name},null,8,["error"])]),e("div",Me,[Ie,$(e("input",{type:"text","onUpdate:modelValue":i[1]||(i[1]=l=>d(n).phone=l),class:"border block w-full min-w-0 flex-1 rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 sm:text-sm"},null,512),[[U,d(n).phone]]),x(u,{error:(v=(y=o.errors)==null?void 0:y.newUser)==null?void 0:v.phone},null,8,["error"])]),e("div",De,[Ke,$(e("input",{type:"text","onUpdate:modelValue":i[2]||(i[2]=l=>d(n).email=l),class:"border block w-full min-w-0 flex-1 rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 sm:text-sm"},null,512),[[U,d(n).email]]),x(u,{error:(b=(_=o.errors)==null?void 0:_.newUser)==null?void 0:b.email},null,8,["error"])]),e("div",Fe,[Ge,x(W,{switch:d(n).show_notification,onToggleOn:i[3]||(i[3]=l=>d(n).show_notification=1),onToggleOff:i[4]||(i[4]=l=>d(n).show_notification=0)},null,8,["switch"])]),ze],40,Pe)])]}),_:1},512)}}},qe={class:""},He={class:"flex items-center justify-between"},Je=e("h1",{class:"text-xl font-bold py-3"},"Users",-1),Ye={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Qe={class:"sm:flex-auto"},We={class:"mt-8 flex flex-col"},Xe={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},Ze={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},et={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},tt={class:"min-w-full divide-y divide-gray-300"},ot=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"},"Name"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Email"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Phone"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Show notification"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Unread"),e("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"Edit")])])],-1),st={class:"divide-y divide-gray-200 bg-white"},nt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},rt={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},lt={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},it={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},at={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},dt={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 space-x-3"},ct=["onClick"],ut=A("Edit"),pt={class:"sr-only"},mt=A("Impersonate"),wt={name:"Index",props:{users:Object,search:String,errors:Object},setup(o){let a=h(o.search),t=h(),n=h(),s=h();E(a,ne(function(f){P.Inertia.get("/admin/users",{search:f},{preserveState:!0,replace:!0})},300));function p(f){t.value=f,n.value.show()}return(f,i)=>{const u=L("Link");return S(),O(j,null,[x(ie,{class:"bg-gray-300 px-10 py-6"}),x(le,null,{default:V(()=>[e("div",qe,[e("div",He,[Je,e("div",Ye,[e("button",{type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto",onClick:i[0]||(i[0]=C(r=>d(s).show(),["prevent"]))}," Add user ")])]),e("div",Qe,[$(e("input",{type:"email",name:"email","onUpdate:modelValue":i[1]||(i[1]=r=>G(a)?a.value=r:a=r),id:"email",class:"block w-full rounded-md border-gray-300 border focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm py-3 px-2",placeholder:"Filter by name, email or phone"},null,512),[[U,d(a)]])]),e("div",We,[e("div",Xe,[e("div",Ze,[e("div",et,[e("table",tt,[ot,e("tbody",st,[(S(!0),O(j,null,se(o.users.data,r=>(S(),O("tr",{key:r.email},[e("td",nt,w(r.name),1),e("td",rt,w(r.email),1),e("td",lt,w(r.phone),1),e("td",it,w(r.show_notification),1),e("td",at,w(r.active_notification_count)+" of "+w(r.all_notification_count),1),e("td",dt,[e("a",{href:"#",class:"text-indigo-600 hover:text-indigo-900",onClick:C(g=>p(r),["prevent"])},[ut,e("span",pt,", "+w(r.name),1)],8,ct),x(u,{href:f.route("impersonate",{user:r.id}),class:"text-indigo-600 hover:text-indigo-900"},{default:V(()=>[mt]),_:2},1032,["href"])])]))),128))])])])])])])]),x(re,{pagination:o.users},null,8,["pagination"])]),_:1}),x(Ne,{ref_key:"editUserModalRef",ref:n,user:d(t),errors:o.errors},null,8,["user","errors"]),x(Ae,{ref_key:"newUserModalRef",ref:s,errors:o.errors},null,8,["errors"])],64)}}};export{wt as default};
